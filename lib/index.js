"use strict";var n=require("path"),e=require("fs");function t(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=t(n),r={subNavShow:[],ignoreFolders:["node_modules"],ignoreFiles:[],dirPrefix:"📂  ",filePrefix:"✏️  ",useREADME:!0,deep:2,childrenKey:"children"};function o(){return r||{}}var c=function(n,e){return 0===n.files.length&&0===n.folders.length?"":function(n){return"---\ntitle: "+n.title+"\n---\n## 该章节包含以下内容"}({title:e})+"\n  \n  "+n.files.map((function(n){return"\n- [".concat(n.replace(".md",""),"](").concat(n,")\n  ")})).join("")+n.folders.map((function(n){var e=n.items.map((function(e){return"\n- [".concat(e.replace(".md",""),"](").concat(n.link+"/"+e,")\n  ")})).join("");return"\n#### [".concat(n.title,"](").concat(n.link,")\n    ")+e})).join("")},u=function(n,t,r){return void 0===t&&(t=[]),void 0===r&&(r=[]),e.readdirSync(n).sort().filter((function(o){var c=e.statSync(i.default.join(n,o)),u=o.slice(o.lastIndexOf(".")+1);return c.isFile()&&t.includes(u)&&function(n){return"readme.md"!==n.toLocaleLowerCase()}(o)&&!r.includes(o)}))},l=function(n){void 0===n&&(n=".");var t=o(),r=e.readdirSync(n),c=[];return r.forEach((function(r){var o=i.default.join(n,r);e.statSync(o).isDirectory()&&!t.ignoreFolders.includes(r)&&c.push(o)})),c},s=function(n,t,r){void 0===r&&(r="/");var a=o(),d=[];l(n).sort().forEach((function(n){var e,i,o,c=n.substring(n.lastIndexOf("/")+1),u=r+c+"/",l=s(n,t+1,u);d.push(((e={text:"".concat(a.dirPrefix).concat(c),link:a.useREADME?u:null!==(o=null===(i=l[0])||void 0===i?void 0:i.link)&&void 0!==o?o:u})[a.childrenKey]=0===t||a.subNavShow.includes(c)?l:[],e))}));var f=function(n,e){void 0===e&&(e="");var t=o();return u(n,["md"],t.ignoreFiles).map((function(n){return e+n}))}(n,r);return f.length>0&&(f.sort().filter((function(n){return!a.ignoreFiles.includes(n.substring(n.lastIndexOf("/")+1,n.lastIndexOf(".")))})).forEach((function(n){d.push({text:"".concat(a.filePrefix).concat(n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("."))),link:n})})),function(n){var t=o(),r={files:u(n,["md"],t.ignoreFiles),folders:l(n).map((function(e){return{title:e.substring(e.lastIndexOf("/")+1),link:e.replace(n,"."),items:u(e,["md"],t.ignoreFiles)||[]}}))},s=c(r,n.substring(n.lastIndexOf("/")+1)),a=i.default.join(n,"./README.md");e.writeFileSync(a,s)}(n)),d};s("../code-drying-plan",0),module.exports=function(e){e||(e=r);var t=Object.assign({},r,e),i=n.resolve(process.cwd(),"docs");return function(n){r=n}(t),s(i,0)};
